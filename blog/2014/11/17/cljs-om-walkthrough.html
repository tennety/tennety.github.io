<!DOCTYPE html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset='UTF-8'>
  <meta content='' name='description'>
  <meta content='' name='copyright'>
  <link href='/humans.txt' rel='author' type='text/plain'>
  <meta content='width=device-width, initial-scale=1.0' name='viewport'>
  <meta content='true' name='HandheldFriendly'>
  <meta content='320' name='MobileOptimized'>
  <meta content='yes' name='apple-mobile-web-app-capable'>
  <meta content='black-translucent' name='apple-mobile-web-app-status-bar-style'>
  <meta content='on' http-equiv='cleartype'>
  <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
  <title>Adding a Component to a ClojureScript/Om Application &mdash; a Walkthrough</title>
  <link href="/stylesheets/application.css" media="screen" rel="stylesheet" type="text/css" />
  
  <!-- IE backporting -->
  <!--[if lt IE 9]>
  <script src="/javascripts/html5.js" type="text/javascript"></script>
  <![endif]-->
  
</head>
<body>
  <div class='sticky'>
    <nav class='top-bar home-border'>
      <ul class='title-area'>
        <li class='name'>
          <h1>
            <a href="/">Chandu Tennety</a>
          </h1>
        </li>
        <li class='toggle-topbar menu-icon'>
          <a href=''>
            <span></span>
          </a>
        </li>
      </ul>
      <section class='top-bar-section'>
        <ul class='left'>
          <li>
            <a href='/blog'>Blog</a>
          </li>
          <li>
            <a href='/resume.html'>Resume</a>
          </li>
          <li>
            <a href='https://github.com/tennety' target='_blank'>
              <i class='icon-github-alt'></i>
            </a>
          </li>
          <li>
            <a href='https://twitter.com/tennety' target='_blank'>
              <i class='icon-twitter'></i>
            </a>
          </li>
          <li>
            <a href='mailto:chandu.tennety+blog@gmail.com' target='_blank'>
              <i class='icon-envelope-alt'></i>
            </a>
          </li>
        </ul>
      </section>
    </nav>
  </div>
  <div class='row'>
    <div class='small-12 columns'>
      <div class='row'>
        <article class='small-9 columns'>
          <h1>
            Adding a Component to a ClojureScript/Om Application &mdash; a Walkthrough
          </h1>
          <p><a href="http://birdwave.neo.com">Birdwave</a> is a heavily data-driven app, which makes its UI an excellent candidate to structure into Om components. In this article, we'll add a new component to the app, and try to understand some of its inner workings in the process.</p>
          
          <h2 id="intent-of-the-component">Intent of the Component</h2>
          
          <p>Birdwave displays month-to-month changes in the sightings of a selected species
          of bird. Currently, the user can change the selected month in two ways,
          depending on their device size (as noted in <a href="http://www.neo.com/2014/10/03/responsive-javascript-with-enquirejs">this post</a>).
          On larger screens there's a month slider:
          <img src="/images/before.png" /></p>
          
          <p>And on smaller screens there's a select box with the list of available months:</p>
          
          <p><img src="/images/after.png" /></p>
          
          <p>It would be nice to have '+' and
          '-' buttons on either side of the select box for the user to go to the previous
          or next month without having to open the select box each time. This is exactly
          what we'll add in this article.</p>
          
          <p><img src="/images/after2.png" /></p>
          
          <h2 id="setup">Setup</h2>
          
          <p>The date selector component currently looks like this:</p>
          
          <pre class="highlight clojure"><table><tbody><tr><td class="gutter gl"><div class="lineno">1</div><div class="lineno">2</div><div class="lineno">3</div><div class="lineno">4</div><div class="lineno">5</div><div class="lineno">6</div><div class="lineno">7</div><div class="lineno">8</div><div class="lineno">9</div><div class="lineno">10</div><div class="lineno">11</div></td><td class="code"><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">date-select</span><span class="w"> </span><span class="p">[</span><span class="n">model</span><span class="w"> </span><span class="n">owner</span><span class="p">]</span><span class="w">
            </span><span class="p">(</span><span class="nf">reify</span><span class="w">
              </span><span class="n">om/IRender</span><span class="w">
              </span><span class="p">(</span><span class="nf">render</span><span class="w"> </span><span class="p">[</span><span class="n">_</span><span class="p">]</span><span class="w">
                </span><span class="p">(</span><span class="nf">dom/div</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w"> </span><span class="p">{</span><span class="no">:id</span><span class="w"> </span><span class="s">&quot;slider&quot;</span><span class="p">}</span><span class="w">
                  </span><span class="p">(</span><span class="nf">dom/div</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w"> </span><span class="p">{</span><span class="no">:id</span><span class="w"> </span><span class="s">&quot;date-select&quot;</span><span class="p">}</span><span class="w">
                    </span><span class="p">(</span><span class="nb">apply</span><span class="w"> </span><span class="n">dom/select</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w">
                           </span><span class="p">{</span><span class="no">:value</span><span class="w"> </span><span class="p">(</span><span class="no">:time-period</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w">
                            </span><span class="no">:onChange</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nf">put!</span><span class="w"> </span><span class="p">(</span><span class="nf">om/get-state</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="no">:time-period-ch</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">..</span><span class="w"> </span><span class="n">%</span><span class="w"> </span><span class="n">-target</span><span class="w"> </span><span class="n">-value</span><span class="p">))}</span><span class="w">
                           </span><span class="p">(</span><span class="nb">map</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nf">dom/option</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w"> </span><span class="p">{</span><span class="no">:value</span><span class="w"> </span><span class="n">%</span><span class="p">}</span><span class="w"> </span><span class="p">(</span><span class="nf">month-name</span><span class="w"> </span><span class="n">%</span><span class="p">))</span><span class="w"> </span><span class="n">dates</span><span class="p">)))))))</span><span class="w">
          </span></td></tr></tbody></table></pre>
          <p>If you look at line 7 through 10, the component is responsible for generating a
          select element whose value is the currently selected time period. When a change
          event happens, the handler puts the new value on a <em>core.async</em> channel,
          <em>time-period-ch</em>, which is responsible for relaying the changes to the app
          state, called <em>model</em>.</p>
          
          <p>The available dates are stored as strings in the format
          &quot;YYYY/MM&quot; in a vector named <em>dates</em>:</p>
          
          <pre class="highlight clojure"><table><tbody><tr><td class="gutter gl"><div class="lineno">1</div><div class="lineno">2</div><div class="lineno">3</div></td><td class="code"><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">dates</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w"> </span><span class="p">[</span><span class="s">&quot;2012/12&quot;</span><span class="w"> </span><span class="s">&quot;2013/01&quot;</span><span class="w"> </span><span class="s">&quot;2013/02&quot;</span><span class="w"> </span><span class="s">&quot;2013/03&quot;</span><span class="w"> </span><span class="s">&quot;2013/04&quot;</span><span class="w"> </span><span class="s">&quot;2013/05&quot;</span><span class="w">
                          </span><span class="s">&quot;2013/06&quot;</span><span class="w"> </span><span class="s">&quot;2013/07&quot;</span><span class="w"> </span><span class="s">&quot;2013/08&quot;</span><span class="w"> </span><span class="s">&quot;2013/09&quot;</span><span class="w"> </span><span class="s">&quot;2013/10&quot;</span><span class="w"> </span><span class="s">&quot;2013/11&quot;</span><span class="p">])</span><span class="w">
          </span></td></tr></tbody></table></pre>
          <p>When a user taps on the '+', our objective is to take the current date, find
          the next date in the <em>dates</em> vector and push it onto the channel. Similarly,
          for the '-' button, we find the previous date and push it onto the channel.</p>
          
          <h2 id="implementation">Implementation</h2>
          
          <p>We can add our <em>date-plus</em> component as a sibling to the select element, like
          so (only showing lines 7 and after from the above snippet):</p>
          
          <pre class="highlight clojure"><table><tbody><tr><td class="gutter gl"><div class="lineno">1</div><div class="lineno">2</div><div class="lineno">3</div><div class="lineno">4</div><div class="lineno">5</div><div class="lineno">6</div></td><td class="code"><span class="p">(</span><span class="nb">apply</span><span class="w"> </span><span class="n">dom/select</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w">
                 </span><span class="p">{</span><span class="no">:value</span><span class="w"> </span><span class="p">(</span><span class="no">:time-period</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w">
                  </span><span class="no">:onChange</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nf">put!</span><span class="w"> </span><span class="p">(</span><span class="nf">om/get-state</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="no">:time-period-ch</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">..</span><span class="w"> </span><span class="n">%</span><span class="w"> </span><span class="n">-target</span><span class="w"> </span><span class="n">-value</span><span class="p">))}</span><span class="w">
                 </span><span class="p">(</span><span class="nb">map</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nf">dom/option</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w"> </span><span class="p">{</span><span class="no">:value</span><span class="w"> </span><span class="n">%</span><span class="p">}</span><span class="w"> </span><span class="p">(</span><span class="nf">month-name</span><span class="w"> </span><span class="n">%</span><span class="p">))</span><span class="w"> </span><span class="n">dates</span><span class="p">)))</span><span class="w">
          </span><span class="p">(</span><span class="nf">om/build</span><span class="w"> </span><span class="n">date-plus</span><span class="w"> </span><span class="p">(</span><span class="no">:time-period</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="no">:state</span><span class="w"> </span><span class="p">{</span><span class="no">:time-period-ch</span><span class="w"> </span><span class="p">(</span><span class="nf">om/get-state</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="no">:time-period-ch</span><span class="p">)}})</span><span class="w">
          </span></td></tr></tbody></table></pre>
          <p>We know that <em>date-plus</em> needs access to the <em>time-period-ch</em>, but since it
          is part of the app's internal state, it needs to be passed in as local state to
          the component. Now we can build the component itself:</p>
          
          <pre class="highlight clojure"><table><tbody><tr><td class="gutter gl"><div class="lineno">1</div><div class="lineno">2</div><div class="lineno">3</div><div class="lineno">4</div><div class="lineno">5</div><div class="lineno">6</div><div class="lineno">7</div></td><td class="code"><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">date-plus</span><span class="w"> </span><span class="p">[</span><span class="n">model</span><span class="w"> </span><span class="n">owner</span><span class="p">]</span><span class="w">
            </span><span class="p">(</span><span class="nf">reify</span><span class="w">
              </span><span class="n">om/IRender</span><span class="w">
              </span><span class="p">(</span><span class="nf">render</span><span class="w"> </span><span class="p">[</span><span class="n">_</span><span class="p">]</span><span class="w">
                </span><span class="p">(</span><span class="nf">dom/span</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w"> </span><span class="p">{</span><span class="no">:className</span><span class="w"> </span><span class="s">&quot;plus&quot;</span><span class="w">
                               </span><span class="no">:onClick</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nf">update-month!</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">owner</span><span class="p">)}</span><span class="w"> </span><span class="s">&quot;+&quot;</span><span class="p">))))</span><span class="w">
          </span></td></tr></tbody></table></pre>
          <p>As you can see, it's a simple span with the + text in it, and a click handler
          which calls off to an <em>update-month!</em> function. This is what that function
          looks like:</p>
          
          <pre class="highlight clojure"><table><tbody><tr><td class="gutter gl"><div class="lineno">1</div><div class="lineno">2</div><div class="lineno">3</div><div class="lineno">4</div><div class="lineno">5</div><div class="lineno">6</div></td><td class="code"><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">update-month!</span><span class="w"> </span><span class="p">[</span><span class="n">model</span><span class="w"> </span><span class="n">owner</span><span class="p">]</span><span class="w">
            </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">current-position</span><span class="w"> </span><span class="p">(</span><span class="nf">.indexOf</span><span class="w"> </span><span class="n">dates</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w">
                  </span><span class="n">next-month</span><span class="w"> </span><span class="p">(</span><span class="nb">get</span><span class="w"> </span><span class="n">dates</span><span class="w"> </span><span class="p">(</span><span class="nb">inc</span><span class="w"> </span><span class="p">(</span><span class="nf">js/parseInt</span><span class="w"> </span><span class="n">current-position</span><span class="p">)))</span><span class="w">
                  </span><span class="n">time-period-ch</span><span class="w"> </span><span class="p">(</span><span class="nf">om/get-state</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="no">:time-period-ch</span><span class="p">)]</span><span class="w">
              </span><span class="p">(</span><span class="nb">when-not</span><span class="w"> </span><span class="p">(</span><span class="nb">nil?</span><span class="w"> </span><span class="n">next-month</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">put!</span><span class="w"> </span><span class="n">time-period-ch</span><span class="w"> </span><span class="n">next-month</span><span class="p">))))</span><span class="w">
          </span></td></tr></tbody></table></pre><p>The function does 3 things:</p>
          
          <ul>
            <li>finds the next month in the dates array by incrementing the index of the
          current month (which is the model that was passed in)</li>
            <li>retrieves the <em>time-period-ch</em> channel from the state set on the component</li>
            <li>puts the next month on the channel</li>
          </ul>
          
          <p>It checks for nil in case the current month is the last in the array, in which
          case there's nothing to do.</p>
          
          <h2 id="adding-the---button">Adding the '-' button</h2>
          
          <p>The '-' button works the exact same way, the only difference being that it
          needs to <em>decrement</em> the index of the current month. We can make this happen
          with a simple change to our <em>update-month!</em> function, by letting it take a
          function as a parameter in addition to <em>model</em> and <em>owner</em>:</p>
          
          <pre class="highlight clojure"><table><tbody><tr><td class="gutter gl"><div class="lineno">1</div><div class="lineno">2</div><div class="lineno">3</div><div class="lineno">4</div><div class="lineno">5</div><div class="lineno">6</div></td><td class="code"><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">update-month!</span><span class="w"> </span><span class="p">[</span><span class="n">model</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="n">func</span><span class="p">]</span><span class="w">
            </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">current-position</span><span class="w"> </span><span class="p">(</span><span class="nf">.indexOf</span><span class="w"> </span><span class="n">dates</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w">
                  </span><span class="n">next-month</span><span class="w"> </span><span class="p">(</span><span class="nb">get</span><span class="w"> </span><span class="n">dates</span><span class="w"> </span><span class="p">(</span><span class="nf">func</span><span class="w"> </span><span class="p">(</span><span class="nf">js/parseInt</span><span class="w"> </span><span class="n">current-position</span><span class="p">)))</span><span class="w">
                  </span><span class="n">time-period-ch</span><span class="w"> </span><span class="p">(</span><span class="nf">om/get-state</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="no">:time-period-ch</span><span class="p">)]</span><span class="w">
              </span><span class="p">(</span><span class="nb">when-not</span><span class="w"> </span><span class="p">(</span><span class="nb">nil?</span><span class="w"> </span><span class="n">next-month</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">put!</span><span class="w"> </span><span class="n">time-period-ch</span><span class="w"> </span><span class="n">next-month</span><span class="p">))))</span><span class="w">
          </span></td></tr></tbody></table></pre>
          <p>The function is called on the current month's index to return the next month's
          index. In case of <em>date-plus</em>, we pass in the <em>inc</em> function, and for
          <em>date-minus</em>, we pass in <em>dec</em>. This is what they look like now:</p>
          
          <pre class="highlight clojure"><table><tbody><tr><td class="gutter gl"><div class="lineno">1</div><div class="lineno">2</div><div class="lineno">3</div><div class="lineno">4</div><div class="lineno">5</div><div class="lineno">6</div><div class="lineno">7</div><div class="lineno">8</div><div class="lineno">9</div><div class="lineno">10</div><div class="lineno">11</div><div class="lineno">12</div><div class="lineno">13</div><div class="lineno">14</div></td><td class="code"><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">date-plus</span><span class="w"> </span><span class="p">[</span><span class="n">model</span><span class="w"> </span><span class="n">owner</span><span class="p">]</span><span class="w">
            </span><span class="p">(</span><span class="nf">reify</span><span class="w">
              </span><span class="n">om/IRender</span><span class="w">
              </span><span class="p">(</span><span class="nf">render</span><span class="w"> </span><span class="p">[</span><span class="n">_</span><span class="p">]</span><span class="w">
                </span><span class="p">(</span><span class="nf">dom/span</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w"> </span><span class="p">{</span><span class="no">:id</span><span class="w"> </span><span class="s">&quot;date-plus&quot;</span><span class="w">
                               </span><span class="no">:onClick</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nf">update-month!</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="nb">inc</span><span class="p">)}</span><span class="w"> </span><span class="s">&quot;+&quot;</span><span class="p">))))</span><span class="w">
          
          </span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">date-minus</span><span class="w"> </span><span class="p">[</span><span class="n">model</span><span class="w"> </span><span class="n">owner</span><span class="p">]</span><span class="w">
            </span><span class="p">(</span><span class="nf">reify</span><span class="w">
              </span><span class="n">om/IRender</span><span class="w">
              </span><span class="p">(</span><span class="nf">render</span><span class="w"> </span><span class="p">[</span><span class="n">_</span><span class="p">]</span><span class="w">
                </span><span class="p">(</span><span class="nf">dom/span</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w"> </span><span class="p">{</span><span class="no">:id</span><span class="w"> </span><span class="s">&quot;date-minus&quot;</span><span class="w">
                               </span><span class="no">:onClick</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nf">update-month!</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="nb">dec</span><span class="p">)}</span><span class="w"> </span><span class="s">&quot;-&quot;</span><span class="p">))))</span><span class="w">
          </span></td></tr></tbody></table></pre>
          <p>And here's the final date selector:</p>
          
          <pre class="highlight clojure"><table><tbody><tr><td class="gutter gl"><div class="lineno">1</div><div class="lineno">2</div><div class="lineno">3</div><div class="lineno">4</div><div class="lineno">5</div><div class="lineno">6</div><div class="lineno">7</div><div class="lineno">8</div><div class="lineno">9</div><div class="lineno">10</div><div class="lineno">11</div><div class="lineno">12</div><div class="lineno">13</div></td><td class="code"><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">date-select</span><span class="w"> </span><span class="p">[</span><span class="n">model</span><span class="w"> </span><span class="n">owner</span><span class="p">]</span><span class="w">
            </span><span class="p">(</span><span class="nf">reify</span><span class="w">
              </span><span class="n">om/IRender</span><span class="w">
              </span><span class="p">(</span><span class="nf">render</span><span class="w"> </span><span class="p">[</span><span class="n">_</span><span class="p">]</span><span class="w">
                </span><span class="p">(</span><span class="nf">dom/div</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w"> </span><span class="p">{</span><span class="no">:id</span><span class="w"> </span><span class="s">&quot;slider&quot;</span><span class="p">}</span><span class="w">
                  </span><span class="p">(</span><span class="nf">dom/div</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w"> </span><span class="p">{</span><span class="no">:id</span><span class="w"> </span><span class="s">&quot;date-select&quot;</span><span class="p">}</span><span class="w">
                    </span><span class="p">(</span><span class="nf">om/build</span><span class="w"> </span><span class="n">date-minus</span><span class="w"> </span><span class="p">(</span><span class="no">:time-period</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="no">:state</span><span class="w"> </span><span class="p">{</span><span class="no">:time-period-ch</span><span class="w"> </span><span class="p">(</span><span class="nf">om/get-state</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="no">:time-period-ch</span><span class="p">)}})</span><span class="w">
                    </span><span class="p">(</span><span class="nb">apply</span><span class="w"> </span><span class="n">dom/select</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w">
                           </span><span class="p">{</span><span class="no">:value</span><span class="w"> </span><span class="p">(</span><span class="no">:time-period</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w">
                            </span><span class="no">:onChange</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nf">put!</span><span class="w"> </span><span class="p">(</span><span class="nf">om/get-state</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="no">:time-period-ch</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nb">..</span><span class="w"> </span><span class="n">%</span><span class="w"> </span><span class="n">-target</span><span class="w"> </span><span class="n">-value</span><span class="p">))}</span><span class="w">
                           </span><span class="p">(</span><span class="nb">map</span><span class="w"> </span><span class="o">#</span><span class="p">(</span><span class="nf">dom/option</span><span class="w"> </span><span class="o">#</span><span class="n">js</span><span class="w"> </span><span class="p">{</span><span class="no">:value</span><span class="w"> </span><span class="n">%</span><span class="p">}</span><span class="w"> </span><span class="p">(</span><span class="nf">month-name</span><span class="w"> </span><span class="n">%</span><span class="p">))</span><span class="w"> </span><span class="n">dates</span><span class="p">))</span><span class="w">
                    </span><span class="p">(</span><span class="nf">om/build</span><span class="w"> </span><span class="n">date-plus</span><span class="w"> </span><span class="p">(</span><span class="no">:time-period</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="no">:state</span><span class="w"> </span><span class="p">{</span><span class="no">:time-period-ch</span><span class="w"> </span><span class="p">(</span><span class="nf">om/get-state</span><span class="w"> </span><span class="n">owner</span><span class="w"> </span><span class="no">:time-period-ch</span><span class="p">)}}))))))</span><span class="w">
          </span></td></tr></tbody></table></pre>
          <h3 id="conclusion">Conclusion</h3>
          
          <p>And that's it! Om's convention of isolating state makes it easy to build new
          interactive components with very little code (about 20 additional lines for
          both the + and - buttons).</p>
          <ul class='read_next'>
            <li><a href="/blog/2014/10/03/responsive-js.html">&laquo; Responsive JavaScript With EnquireJS</a></li>
            <li>&nbsp;</li>
          </ul>
          <div id='disqus_thread'>
            <script type='text/javascript'>
              var disqus_shortname = 'tennety';
              (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
            </script>
            <noscript>
              Please enable JavaScript to view the
              <a href="http://disqus.com/?ref_noscript">comments powered by Disqus</a>
            </noscript>
            <a class='dsq-brlink' href='http://disqus.com'>
              <span class='logo-disqus'>Disqus</span>
            </a>
          </div>
        </article>
        <aside class='small-3 columns'>
          <ul class='credit'>
            <li><a class="tiny button secondary round" href="/blog/tags/tech.html">tech</a></li>
            <li><a class="tiny button secondary round" href="/blog/tags/clojurescript.html">ClojureScript</a></li>
            <li><a class="tiny button secondary round" href="/blog/tags/om.html">Om</a></li>
            <li><a class="tiny button secondary round" href="/blog/tags/component.html">component</a></li>
            <li><a class="tiny button secondary round" href="/blog/tags/tutorial.html">tutorial</a></li>
          </ul>
        </aside>
      </div>
    </div>
  </div>
  <footer class='row'>
    <!--[if lt IE 8]>
    <div id="ie-warning-overlay">
    <div id="ie-warning">
    <h1>Did you know that your copy of Internet Explorer is out of date?</h1>
    <p>
    To get the best possible experience using our website, we recommend that you upgrade to the latest version or use another web browser.
    Any of the following will provide a superior experience, not only on this site, but across the web.
    </p>
    <p>Just click one of the icons below to get to the download page.</p>
    <ul>
    <li>
    <a href="http://microsoft.com/ie">
    <%= image_tag 'browser_ie.gif', :alt => "Download Internet Explorer" %>
    <p>Internet Explorer 8+</p>
    </a>
    </li>
    <li>
    <a href="http://mozilla.org/firefox">
    <%= image_tag 'browser_firefox.gif', :alt => "Download Firefox" %>
    <p>Firefox</p>
    </a>
    </li>
    <li>
    <a href="http://google.com/chrome">
    <%= image_tag 'browser_chrome.gif', :alt => "Download Chrome" %>
    <p>Google Chrome</p>
    </a>
    </li>
    <li>
    <a href="http://apple.com/safari">
    <%= image_tag 'browser_safari.gif', :alt => "Download Safari" %>
    <p>Safari</p>
    </a>
    </li>
    <li>
    <a href="http://opera.com">
    <%= image_tag 'browser_opera.gif', :alt => "Download Opera" %>
    <p>Opera</p>
    </a>
    </li>
    </ul>
    </div>
    </div>
    <![endif]-->
  </footer>
  <!-- jQuery -->
  <script src='//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script>
  <script>
    window.jQuery || document.write('<script src="/jquery.js"><\/script>');
  </script>
  <!-- Javascript -->
  <script src="/javascripts/application.js" type="text/javascript"></script>
  
  <script type='text/javascript'>
    $(document).ready(function () {
    imgSizer.collate();
    
    });
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-46441071-1', 'tennety.github.io');
    ga('send', 'pageview');
  </script>
</body>


